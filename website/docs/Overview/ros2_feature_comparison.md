---
id: ros2_feature_comparison
title: ROS 2 Feature Comparison
---

このセクションはmicro-ROSとROS 2の特徴の比較となる。下に示すリストが[https://index.ros.org/doc/ros2/Features/](https://index.ros.org/doc/ros2/Features/)と[https://index.ros.org/doc/ros2/Roadmap/](https://index.ros.org/doc/ros2/Roadmap/)からまとめられた、そして「Features and Architecture」で述べたカテゴリに沿って特徴をテーブル形式に整理した。

## **Microcontroller-optimized client API supporting all major ROS concepts**

| ROS2の特徴  | | micro-ROSでの可用性 |
| ---- | ---- | ---- |
| 特定の言語ライブラリーでラップした共通のコアクライアントライブラリー  | ✓∘ | ROS 2のクライアントサポートライブラリーrclをそのまま使用している。rclcパッケージがrcl+rclcを利用してC言語で利用できる便利な機能とエグゼキューターを提供してくれる。ロードマップ: すべての機能をrclcに移行し、rclの上に位置する独立した抽象化レイヤーにしてユーザーAPIのように機能する。|
| コンパイル、リンク、動的リンク時のノードコンポーネントのコンポジション | ✓ | コンパイルタイムでのコンポジションだけになる。ランタイムでのコンポジションはRTOSに依存する要素は大きいから。 |
| ライフサイクル付きノード | ✓ | rclc_lifecycleパッケージはrclc_lifecycle_nodeタイプを提供している、このタイプは1つのrclノードにライフサイクルステートマシンをバンドルさせてライフサイクル管理の機能を提供する。 |
| タイプおよびトピックのメモリを静的あるいは動的にハンドルするユーティリティー | ✓ | micro_ros_utilitiesはmicro-ROSアロケーターあるいは静的メモリプールを通じてタイプメモリのハンドル用APIを提供する。|

## **ROS2とのシームレス統合**

| ROS2の特徴 | | micro-ROSでの可用性 |
| ---- | ---- | ---- |
| トピックによる配信/購読 | ✓ | 可能だが、固定サイズのメッセージのみサポートすることで動的メモリの割り当てを避ける。 |
| クライアントとサービス | ✓ | 可能だが、固定サイズのメッセージのみサポートすることで動的メモリの割り当てを避ける。 |
| ROS 1とROS 2間の通信ブリッジ | ✓ | スタンダードのROS 1 – ROS 2ブリッジあるいはSOSSブリッジがmicro-ROSエージェントを通じてmicro-ROSノードと通信することができる。 |
| Actions | ∘ | まもなくrclcに実装される。|
| Parameters | ✓∘ | パラメーターサーバーがmicro-ROSクライアントに実装されている。パラメータークライアントは未実装。 |
| ノードグラフ | ✓ | ROS 2と同じく使用可能。 |
| 探索 | ✓+ | ROS 2のようにエンティティー間の探索が可能。追加の探索機構でクライアントをネットワーク上にエージェントを見つけることができる。 |
| プロセス間とプロセス内通信は同じAPIを使用する。 | ✓∘ | MCU上の共有メモリでのプロセス間通信はmicro-ROSクライアントにおいて可能となる。また、ミドルウェアはスレッドセーフオペレーションを実行することができる。 |
| 拡張可能なフレームワークを使ったコマンドライン確認ツール | ✓ | グラフサポートのおかげで、エージェントを使用すればマイクロプロセッサーで動くmicro-ROSノードはスタンダードのROS 2ツールを使用でき、ROS 2データスペースのトポロジーを確認することができる。同時に、スタンダードROS 2ノードもネットワーク上のmicro-ROSエンティティーの情報を参照することができる。|
| マルチノードを統合するランチシステム | ₋ | MCU上で動くmicro-ROSに適応するためのランチシステムはまだ存在しない。そのようなシステムはRTOSに強く依存する。micro-ROSのシステムモードコンセプトはROS 2とmicro-ROS両方のノードにランタイム設定/自動化機能を提供してくれる。 |
| ノードとトピック向けのネームスペースサポート | ✓ | ROS 2と同様に使用可能。 |
| ROSネームの静的再配置 | ∗ | スタンダードrcl APIの引数としてパスされる場合は使用可能 - 検証要 |
| システムクロックでのレートとスリープ | ∗ | rclタイマーはPOSIX APIを使用する。NuttXでもテスト済みだが、分解能はとても低い。高分解能はハードウェアタイマーによって得ることができる、つまり使用するMCUあるいはRTOSに高度依存するとのことになる。この特徴についはさらなる調査が必要。|
| シミュレーションタイムのサポート | ∗ | 設定せずに使用可能だが要確認。稀にHILの設定が必要な場合がある。 |

## **高度なリソース制約だが自由度高いミドルウェア**

| ROS2の特徴 | | micro-ROSでの可用性 |
| ---- | ---- | ---- |
| DDS-XRCEやDDSを通じての伝送およびシリアライズ化 | ✓+  | 使用可能なプロトコール：UDP、シリアル（UART）およびMicro XRCE-DDSによるカスタムプロトコール。クライアントとエージェント間のシリアル化はMicro-CDRによる提供され、そしてエージェントとスタンダードDDS間のシリアル化はFast-CDRで行う。 |
| マルチDDS実装のサポート、ランタイム時に選択可能 | ✓ | 理論上Micro XRCE-DDSエージェントを通じてサポート可能だが、コンパイル時のみ。 |
| 理想ではないネットワーク環境でのQoS設定 | ✓+ | DDS-XRCEワイヤプロトコールでの通信に信頼性とベストエフォートの2種類のQoSセマンティクスが提供され、コンパイル時に選択できる。ROS 2データスペースとの通信において以下のチュートリアルに従えばmicro-ROSエンティティーはDDS上すべてのQoSの恩恵を受けることができる。 |
| DDSセキュリティーサポート | ✓- | セキュリティーはまだクライアントとエージェント間の通信でサポートされていない。しかし、micro-ROSエージェントDDSエンティティーを生成している間はFast DDSのセキュリティー機能の恩恵を受けられる。ロードマップ: Micro XRCE-DDS内セキュリティー機構の実装は将来のリリースで計画されている。 |
| IDL | ✓+ | micro-ROSはROS 2と同様のIDLタイプをサポートする。クライアント側で行うIDLからC言語への生成は[Micro-XRCE-DDS-Gen](https://github.com/eProsima/Micro-XRCE-DDS-Gen)ライブラリーにより実行される。一方、エージェント側のC++タイプへの生成は[Fast-DDS-Gen](https://github.com/eProsima/Fast-DDS-Gen)で行う。 |
| ロギング | ∗ | 理論上スタンダードロギング機構の一部として機能するはずだが動的メッセージサイズのせいでMicro-XRCE-DDSではサポートできない。要確認。。。 |

## **汎用ビルドシステムのマルチRTOSサポート**

| 特徴 | | micro-ROSでの可用性 |
| ---- | ---- | ---- |
| ビルドシステム | ✓ | micro-ROSはmicro-ROSアプリケーションをビルドする二つの方法を提供する。一つ目の方法はROS 2ワークスペースに統合されている[micro_ros_setup](https://github.com/micro-ROS/micro_ros_setup)を使う。このアプローチでは、NuttX, FreeRTOSとZephyrのビルドシステムはcolconと一体化となる。もう一つの方法はmicro-ROSを外部開発フレームワーク（e.g., ESP-IDFとZephyrビルドシステム）のコンポーネントとして提供する。|
| ハードウェアサポート | ✓ | micro-ROSは公式的に四つのボードをサポートする。今のところ、すべてのオフィシャルポートはSTのSTM32シリーズおよびEspressifのESP32をベースにしている。[ここ](https://micro.ros.org/docs/overview/hardware/)からより詳しい情報を得られる。多くのポートがユーザーによりコンプリートされている、[コンプリートリスト](https://github.com/micro-ROS/micro_ros_setup#supported-platforms)を確認してくだい。|
| OSサポート | ✓ | micro-ROSをサポートするOSはRTOSes FreeRTOS、Zephyr、NuttXの他にLinuxとWindowsがある。|

## **micro-ROS特定要素**

| 特徴 | | micro-ROSでの可用性 |
| ---- | ---- | ---- |
| 純ROS 2移動ロボットのデモ | ✓ | いくつかROS 2とmicro-ROSを両方を使用するロボットのデモが用意されている。https://micro-ros.github.io/docs/tutorials/demos/。 |
| リアルタイムコードサポート | ✓ | リアルタイム動作はmicro-ROSの一番典型的使い方となる。rclcエグゼキューターはリアルタイム性アプリケーションを実装するための機構を提供してくれる。低レイアにおいては、Micro XRCE-DDSライブラリーはメモリの動的な解放と指定期間のタスクの実行のための機能を提供するための適時性と方法論を示す。|
| ベアメタルマイクロコントローラーへのサポート | ✓ | MCU上でROS 2を使えるようになるのはmicro-ROSのコンセプト。micro-ROSのスタンダードのアプローチはRTOSを基底としている（e.g., FreeRTOS, ZephyrあるいはNuttX）。最近の開発はこの縛りを緩そうとしている、Arduino IDEでの実装は正真正銘のベアメタルサポートへの第一歩となる。|
| 継続的インテグレーション | ✓∘ | 現在、micro-ROSのCIはGitHubとGitLabに分けられているが、2020までにすべてのCIをGitHubの新しいCI actionsに移行するべき。注意すべきなのはスタンダードROS 2向けのパッケージはbuild.ros2.orgにもビルドおよびテストされている。|
| ドキュメンテーション | ✓ | ---- |